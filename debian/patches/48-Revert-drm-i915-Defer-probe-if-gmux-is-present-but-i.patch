From 38d7c6b46caf266e6059f03f55f637ed9ffc967f Mon Sep 17 00:00:00 2001
From: Timo Aaltonen <timo.aaltonen@canonical.com>
Date: Mon, 11 Sep 2017 13:17:54 +0300
Subject: [PATCH] Revert "drm/i915: Defer probe if gmux is present but its
 driver isn't"

This reverts commit 704ab614ec1201138032003c03113a81526638ab.
---
 drivers/gpu/drm/i915/i915_pci.c | 9 ---------
 1 file changed, 9 deletions(-)

diff --git a/drivers/gpu/drm/i915/i915_pci.c b/drivers/gpu/drm/i915/i915_pci.c
index 9e94886..2fe9d26 100644
--- a/drivers/gpu/drm/i915/i915_pci.c
+++ b/drivers/gpu/drm/i915/i915_pci.c
@@ -23,8 +23,6 @@
  */
 
 #include <linux/console.h>
-#include <linux/vgaarb.h>
-#include <linux/vga_switcheroo.h>
 
 #include "i915_drv.h"
 
@@ -451,13 +449,6 @@ static int i915_pci_probe(struct pci_dev *pdev, const struct pci_device_id *ent)
 	if (PCI_FUNC(pdev->devfn))
 		return -ENODEV;
 
-	/*
-	 * apple-gmux is needed on dual GPU MacBook Pro
-	 * to probe the panel if we're the inactive GPU.
-	 */
-	if (vga_switcheroo_client_probe_defer(pdev))
-		return -EPROBE_DEFER;
-
 	return i915_driver_load(pdev, ent);
 }
 
-- 
2.7.4

