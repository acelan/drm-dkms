From 99f74e4bd463d7bdea8c326832547aabfd706699 Mon Sep 17 00:00:00 2001
From: Timo Aaltonen <timo.aaltonen@canonical.com>
Date: Thu, 4 Oct 2018 17:04:59 +0300
Subject: [PATCH] Revert "drm: Use idr_init_base(1) when using id==0 for
 invalid"

This reverts commit e86584c5377f4219781492ca164664bce40c0090.
---
 drivers/gpu/drm/drm_gem.c     | 4 ++--
 drivers/gpu/drm/drm_syncobj.c | 2 +-
 2 files changed, 3 insertions(+), 3 deletions(-)

--- a/drivers/gpu/drm/drm_gem.c
+++ b/drivers/gpu/drm/drm_gem.c
@@ -98,7 +98,7 @@ drm_gem_init(struct drm_device *dev)
 	struct drm_vma_offset_manager *vma_offset_manager;
 
 	mutex_init(&dev->object_name_lock);
-	idr_init_base(&dev->object_name_idr, 1);
+	idr_init(&dev->object_name_idr);
 
 	vma_offset_manager = kzalloc(sizeof(*vma_offset_manager), GFP_KERNEL);
 	if (!vma_offset_manager) {
@@ -785,7 +785,7 @@ drm_gem_open_ioctl(struct drm_device *de
 void
 drm_gem_open(struct drm_device *dev, struct drm_file *file_private)
 {
-	idr_init_base(&file_private->object_idr, 1);
+	idr_init(&file_private->object_idr);
 	spin_lock_init(&file_private->table_lock);
 }
 
--- a/drivers/gpu/drm/drm_syncobj.c
+++ b/drivers/gpu/drm/drm_syncobj.c
@@ -498,7 +498,7 @@ err_put_fd:
 void
 drm_syncobj_open(struct drm_file *file_private)
 {
-	idr_init_base(&file_private->syncobj_idr, 1);
+	idr_init(&file_private->syncobj_idr);
 	spin_lock_init(&file_private->syncobj_table_lock);
 }
 
