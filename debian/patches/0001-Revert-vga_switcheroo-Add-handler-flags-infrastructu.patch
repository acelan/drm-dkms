From 3f32c2a5a8245394d5a179f705fe26a374f6679b Mon Sep 17 00:00:00 2001
From: Timo Aaltonen <timo.aaltonen@canonical.com>
Date: Mon, 11 Sep 2017 15:44:37 +0300
Subject: [PATCH] Revert "vga_switcheroo: Add handler flags infrastructure"

This reverts commit 156d7d4120e1c860fde667fc30eeae84bc3e7a25.
---
 drivers/gpu/drm/amd/amdgpu/amdgpu_atpx_handler.c |  3 +--
 drivers/gpu/drm/nouveau/nouveau_acpi.c           |  2 +-
 drivers/gpu/drm/radeon/radeon_atpx_handler.c     |  3 +--
 drivers/gpu/vga/vga_switcheroo.c                 | 28 ++++++++-------------
 drivers/platform/x86/apple-gmux.c                |  5 ++++
 include/linux/vga_switcheroo.h                   | 32 ++++++------------------
 6 files changed, 26 insertions(+), 47 deletions(-)

diff --git a/drivers/gpu/drm/amd/amdgpu/amdgpu_atpx_handler.c b/drivers/gpu/drm/amd/amdgpu/amdgpu_atpx_handler.c
index dae35a9..449e5a8 100644
--- a/drivers/gpu/drm/amd/amdgpu/amdgpu_atpx_handler.c
+++ b/drivers/gpu/drm/amd/amdgpu/amdgpu_atpx_handler.c
@@ -587,14 +587,13 @@ static bool amdgpu_atpx_detect(void)
 void amdgpu_register_atpx_handler(void)
 {
 	bool r;
-	enum vga_switcheroo_handler_flags_t handler_flags = 0;
 
 	/* detect if we have any ATPX + 2 VGA in the system */
 	r = amdgpu_atpx_detect();
 	if (!r)
 		return;
 
-	vga_switcheroo_register_handler(&amdgpu_atpx_handler, handler_flags);
+	vga_switcheroo_register_handler(&amdgpu_atpx_handler);
 }
 
 /**
diff --git a/drivers/gpu/drm/radeon/radeon_atpx_handler.c b/drivers/gpu/drm/radeon/radeon_atpx_handler.c
index 0ae13cd2..7aadb58 100644
--- a/drivers/gpu/drm/radeon/radeon_atpx_handler.c
+++ b/drivers/gpu/drm/radeon/radeon_atpx_handler.c
@@ -595,14 +595,13 @@ static bool radeon_atpx_detect(void)
 void radeon_register_atpx_handler(void)
 {
 	bool r;
-	enum vga_switcheroo_handler_flags_t handler_flags = 0;
 
 	/* detect if we have any ATPX + 2 VGA in the system */
 	r = radeon_atpx_detect();
 	if (!r)
 		return;
 
-	vga_switcheroo_register_handler(&radeon_atpx_handler, handler_flags);
+	vga_switcheroo_register_handler(&radeon_atpx_handler);
 }
 
 /**
